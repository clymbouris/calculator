$(document).ready(function(){function ViewModel(arr){var self=this;self.maxCharacters=52,self.memory=ko.observable("").extend({maxCharacters:self.maxCharacters}),self.display=ko.observable(""),self.getLast=function(e){return self.memory().split("")[self.memory().length-1]},self.evaluate=function(){var calculation;calculation=self.isDecimal(eval(self.memory()).toString())?parseFloat(eval(self.memory()).toPrecision(6)):parseFloat(eval(self.memory())),self.display(Number(calculation)),self.memory(""),self.allowFirstOperator=!0},self.allowFirstOperator=!1,self.isDecimal=function(e){var l;for(l=0;l<e.length;l++)if("."===e[l])return!0;return!1},self.wrapInBrackets=function(e){return"("+e+")"},self.allClear=function(){self.memory(""),self.display(""),self.allowFirstOperator=!1},self.singleClear=function(){self.memory(self.memory().slice(0,self.memory().length-1))},self.verify=function(e){switch(e){case"=":self.evaluate();break;case"AC":self.allClear();break;case"C":self.singleClear();break;case"x":(self.memory().length>0||self.allowFirstOperator)&&(e="*",self.update(e));break;case"/":(self.memory().length>0||self.allowFirstOperator)&&self.update(e);break;case"%":(self.memory().length>0||self.allowFirstOperator)&&(self.update("*1/100"),self.memory(self.wrapInBrackets(self.memory())),self.evaluate());break;case",":e=".",this.commaValid()&&self.update(e);break;default:self.update(e)}},self.commaValid=function(){var e,l=this.memory().split("");for(e=l.length-1;e>=0;e--){if("."===l[e])return!1;if(this.isOperator(l[e]))return!0}return!0},self.update=function(e){var l=self.getLast();self.isOperator(l)&&self.isOperator(e)?self.memory(self.memory().slice(0,self.memory().length-1)+e):self.memory(self.memory()+e)},self.isOperator=function(e){var l;for(l=0;l<model.operators.length;l++)if(e===model.operators[l])return!0;return!1}}var model={operators:["+","-","/","*","%"],signs:["+","-"]},view={init:function(){this.$keys=$(".keys"),this.$keys.each(function(){$(this).click(function(){vm.verify($(this).text())})})}};view.init();var vm=new ViewModel;ko.applyBindings(vm)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIlZpZXdNb2RlbCIsImFyciIsInNlbGYiLCJ0aGlzIiwibWF4Q2hhcmFjdGVycyIsIm1lbW9yeSIsImtvIiwib2JzZXJ2YWJsZSIsImV4dGVuZCIsImRpc3BsYXkiLCJnZXRMYXN0Iiwic3RyIiwic3BsaXQiLCJsZW5ndGgiLCJldmFsdWF0ZSIsImNhbGN1bGF0aW9uIiwiaXNEZWNpbWFsIiwiZXZhbCIsInRvU3RyaW5nIiwicGFyc2VGbG9hdCIsInRvUHJlY2lzaW9uIiwiTnVtYmVyIiwiYWxsb3dGaXJzdE9wZXJhdG9yIiwiaSIsIndyYXBJbkJyYWNrZXRzIiwiYWxsQ2xlYXIiLCJzaW5nbGVDbGVhciIsInNsaWNlIiwidmVyaWZ5IiwidmFsIiwidXBkYXRlIiwiY29tbWFWYWxpZCIsIm1lbSIsImlzT3BlcmF0b3IiLCJsYXN0IiwieCIsIm1vZGVsIiwib3BlcmF0b3JzIiwic2lnbnMiLCJ2aWV3IiwiaW5pdCIsIiRrZXlzIiwiZWFjaCIsImNsaWNrIiwidm0iLCJ0ZXh0IiwiYXBwbHlCaW5kaW5ncyJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUFDLFVBQUFDLE1BQUEsV0FFQSxRQUFBQyxXQUFBQyxLQUNBLEdBQUFDLE1BQUFDLElBRUFELE1BQUFFLGNBQUEsR0FFQUYsS0FBQUcsT0FBQUMsR0FBQUMsV0FBQSxJQUNBQyxRQUFBSixjQUFBRixLQUFBRSxnQkFFQUYsS0FBQU8sUUFBQUgsR0FBQUMsV0FBQSxJQUVBTCxLQUFBUSxRQUFBLFNBQUFDLEdBQ0EsTUFBQVQsTUFBQUcsU0FBQU8sTUFBQSxJQUFBVixLQUFBRyxTQUFBUSxPQUFBLElBR0FYLEtBQUFZLFNBQUEsV0FFQSxHQUFBQyxZQUVBQSxhQURBYixLQUFBYyxVQUFBQyxLQUFBZixLQUFBRyxVQUFBYSxZQUNBQyxXQUFBRixLQUFBZixLQUFBRyxVQUFBZSxZQUFBLElBR0FELFdBQUFGLEtBQUFmLEtBQUFHLFdBR0FILEtBQUFPLFFBQUFZLE9BQUFOLGNBRUFiLEtBQUFHLE9BQUEsSUFDQUgsS0FBQW9CLG9CQUFBLEdBR0FwQixLQUFBb0Isb0JBQUEsRUFFQXBCLEtBQUFjLFVBQUEsU0FBQUwsR0FDQSxHQUFBWSxFQUNBLEtBQUFBLEVBQUEsRUFBQUEsRUFBQVosRUFBQUUsT0FBQVUsSUFDQSxHQUFBLE1BQUFaLEVBQUFZLEdBQUEsT0FBQSxDQUVBLFFBQUEsR0FHQXJCLEtBQUFzQixlQUFBLFNBQUFiLEdBQ0EsTUFBQSxJQUFBQSxFQUFBLEtBR0FULEtBQUF1QixTQUFBLFdBQ0F2QixLQUFBRyxPQUFBLElBQ0FILEtBQUFPLFFBQUEsSUFDQVAsS0FBQW9CLG9CQUFBLEdBR0FwQixLQUFBd0IsWUFBQSxXQUNBeEIsS0FBQUcsT0FBQUgsS0FBQUcsU0FBQXNCLE1BQUEsRUFBQXpCLEtBQUFHLFNBQUFRLE9BQUEsS0FHQVgsS0FBQTBCLE9BQUEsU0FBQUMsR0FDQSxPQUFBQSxHQUNBLElBQUEsSUFDQTNCLEtBQUFZLFVBQ0EsTUFDQSxLQUFBLEtBQ0FaLEtBQUF1QixVQUNBLE1BQ0EsS0FBQSxJQUNBdkIsS0FBQXdCLGFBQ0EsTUFDQSxLQUFBLEtBQ0F4QixLQUFBRyxTQUFBUSxPQUFBLEdBQUFYLEtBQUFvQixzQkFDQU8sRUFBQSxJQUNBM0IsS0FBQTRCLE9BQUFELEdBRUEsTUFDQSxLQUFBLEtBQ0EzQixLQUFBRyxTQUFBUSxPQUFBLEdBQUFYLEtBQUFvQixxQkFDQXBCLEtBQUE0QixPQUFBRCxFQUVBLE1BQ0EsS0FBQSxLQUNBM0IsS0FBQUcsU0FBQVEsT0FBQSxHQUFBWCxLQUFBb0Isc0JBQ0FwQixLQUFBNEIsT0FBQSxVQUNBNUIsS0FBQUcsT0FBQUgsS0FBQXNCLGVBQUF0QixLQUFBRyxXQUNBSCxLQUFBWSxXQUVBLE1BQ0EsS0FBQSxJQUNBZSxFQUFBLElBQ0ExQixLQUFBNEIsY0FDQTdCLEtBQUE0QixPQUFBRCxFQUVBLE1BQ0EsU0FDQTNCLEtBQUE0QixPQUFBRCxLQUlBM0IsS0FBQTZCLFdBQUEsV0FDQSxHQUNBUixHQURBUyxFQUFBN0IsS0FBQUUsU0FBQU8sTUFBQSxHQUVBLEtBQUFXLEVBQUFTLEVBQUFuQixPQUFBLEVBQUFVLEdBQUEsRUFBQUEsSUFBQSxDQUNBLEdBQUEsTUFBQVMsRUFBQVQsR0FDQSxPQUFBLENBRUEsSUFBQXBCLEtBQUE4QixXQUFBRCxFQUFBVCxJQUNBLE9BQUEsRUFHQSxPQUFBLEdBR0FyQixLQUFBNEIsT0FBQSxTQUFBRCxHQUNBLEdBQUFLLEdBQUFoQyxLQUFBUSxTQUNBUixNQUFBK0IsV0FBQUMsSUFBQWhDLEtBQUErQixXQUFBSixHQUNBM0IsS0FBQUcsT0FBQUgsS0FBQUcsU0FBQXNCLE1BQUEsRUFBQXpCLEtBQUFHLFNBQUFRLE9BQUEsR0FBQWdCLEdBR0EzQixLQUFBRyxPQUFBSCxLQUFBRyxTQUFBd0IsSUFJQTNCLEtBQUErQixXQUFBLFNBQUFFLEdBQ0EsR0FBQVosRUFDQSxLQUFBQSxFQUFBLEVBQUFBLEVBQUFhLE1BQUFDLFVBQUF4QixPQUFBVSxJQUNBLEdBQUFZLElBQUFDLE1BQUFDLFVBQUFkLEdBQUEsT0FBQSxDQUVBLFFBQUEsR0FJQSxHQUFBYSxRQUNBQyxXQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsS0FDQUMsT0FBQSxJQUFBLE1BR0FDLE1BQ0FDLEtBQUEsV0FDQXJDLEtBQUFzQyxNQUFBNUMsRUFBQSxTQUNBTSxLQUFBc0MsTUFBQUMsS0FBQSxXQUNBN0MsRUFBQU0sTUFBQXdDLE1BQUEsV0FDQUMsR0FBQWhCLE9BQUEvQixFQUFBTSxNQUFBMEMsYUFNQU4sTUFBQUMsTUFFQSxJQUFBSSxJQUFBLEdBQUE1QyxVQUNBTSxJQUFBd0MsY0FBQUYiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuXHRmdW5jdGlvbiBWaWV3TW9kZWwoYXJyKSB7XG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0c2VsZi5tYXhDaGFyYWN0ZXJzID0gNTI7XG5cblx0XHRzZWxmLm1lbW9yeSA9IGtvLm9ic2VydmFibGUoJycpXG5cdFx0LmV4dGVuZCh7IG1heENoYXJhY3RlcnM6IHNlbGYubWF4Q2hhcmFjdGVycyB9KTtcblxuXHRcdHNlbGYuZGlzcGxheSA9IGtvLm9ic2VydmFibGUoJycpO1xuXG5cdFx0c2VsZi5nZXRMYXN0ID0gZnVuY3Rpb24oc3RyKSB7XG5cdFx0XHRyZXR1cm4gc2VsZi5tZW1vcnkoKS5zcGxpdCgnJylbc2VsZi5tZW1vcnkoKS5sZW5ndGggLSAxXTtcblx0XHR9O1xuXG5cdFx0c2VsZi5ldmFsdWF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0LyoganNsaW50IGV2aWw6IHRydWUgKi9cblx0XHRcdHZhciBjYWxjdWxhdGlvbjtcblx0XHRcdGlmIChzZWxmLmlzRGVjaW1hbChldmFsKHNlbGYubWVtb3J5KCkpLnRvU3RyaW5nKCkpKSB7XG5cdFx0XHRcdGNhbGN1bGF0aW9uID0gcGFyc2VGbG9hdChldmFsKHNlbGYubWVtb3J5KCkpLnRvUHJlY2lzaW9uKDYpKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRjYWxjdWxhdGlvbiA9IHBhcnNlRmxvYXQoZXZhbChzZWxmLm1lbW9yeSgpKSk7XG5cdFx0XHR9XG5cdFx0XHQvLyBDb252ZXJ0IHRvIE51bWJlciB0byByZW1vdmUgdHJhaWxpbmcgemVyb3Ncblx0XHRcdHNlbGYuZGlzcGxheShOdW1iZXIoY2FsY3VsYXRpb24pKTtcblx0XHRcdC8vIENsZWFyIG1lbW9yeVxuXHRcdFx0c2VsZi5tZW1vcnkoJycpO1xuXHRcdFx0c2VsZi5hbGxvd0ZpcnN0T3BlcmF0b3IgPSB0cnVlO1xuXHRcdH07XG5cblx0XHRzZWxmLmFsbG93Rmlyc3RPcGVyYXRvciA9IGZhbHNlO1xuXG5cdFx0c2VsZi5pc0RlY2ltYWwgPSBmdW5jdGlvbihzdHIpIHtcblx0XHRcdHZhciBpO1xuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZihzdHJbaV0gPT09ICcuJykgcmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHRcdHNlbGYud3JhcEluQnJhY2tldHMgPSBmdW5jdGlvbihzdHIpIHtcblx0XHRcdHJldHVybiAnKCcgKyBzdHIgKyAnKSc7XG5cdFx0fTtcblxuXHRcdHNlbGYuYWxsQ2xlYXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdHNlbGYubWVtb3J5KCcnKTtcblx0XHRcdHNlbGYuZGlzcGxheSgnJyk7XG5cdFx0XHRzZWxmLmFsbG93Rmlyc3RPcGVyYXRvciA9IGZhbHNlO1xuXHRcdH07XG5cblx0XHRzZWxmLnNpbmdsZUNsZWFyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRzZWxmLm1lbW9yeShzZWxmLm1lbW9yeSgpLnNsaWNlKDAsIHNlbGYubWVtb3J5KCkubGVuZ3RoIC0gMSkpO1xuXHRcdH07XG5cblx0XHRzZWxmLnZlcmlmeSA9IGZ1bmN0aW9uKHZhbCkge1xuXHRcdFx0c3dpdGNoICh2YWwpIHtcblx0XHRcdFx0Y2FzZSAnPSc6XG5cdFx0XHRcdFx0c2VsZi5ldmFsdWF0ZSgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdBQyc6XG5cdFx0XHRcdFx0c2VsZi5hbGxDbGVhcigpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdDJzpcblx0XHRcdFx0XHRzZWxmLnNpbmdsZUNsZWFyKCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ3gnOlxuXHRcdFx0XHRcdGlmIChzZWxmLm1lbW9yeSgpLmxlbmd0aCA+IDAgfHwgc2VsZi5hbGxvd0ZpcnN0T3BlcmF0b3IpIHtcblx0XHRcdFx0XHRcdHZhbCA9ICcqJztcblx0XHRcdFx0XHRcdHNlbGYudXBkYXRlKHZhbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICcvJzpcblx0XHRcdFx0XHRpZiAoc2VsZi5tZW1vcnkoKS5sZW5ndGggPiAwIHx8IHNlbGYuYWxsb3dGaXJzdE9wZXJhdG9yKSB7XG5cdFx0XHRcdFx0XHRzZWxmLnVwZGF0ZSh2YWwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnJSc6XG5cdFx0XHRcdFx0aWYgKHNlbGYubWVtb3J5KCkubGVuZ3RoID4gMCB8fCBzZWxmLmFsbG93Rmlyc3RPcGVyYXRvcikge1xuXHRcdFx0XHRcdFx0c2VsZi51cGRhdGUoJyoxLzEwMCcpO1xuXHRcdFx0XHRcdFx0c2VsZi5tZW1vcnkoc2VsZi53cmFwSW5CcmFja2V0cyhzZWxmLm1lbW9yeSgpKSk7XG5cdFx0XHRcdFx0XHRzZWxmLmV2YWx1YXRlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICcsJzpcblx0XHRcdFx0XHR2YWwgPSAnLic7XG5cdFx0XHRcdFx0aWYgKHRoaXMuY29tbWFWYWxpZCgpKSB7XG5cdFx0XHRcdFx0XHRzZWxmLnVwZGF0ZSh2YWwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRzZWxmLnVwZGF0ZSh2YWwpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRzZWxmLmNvbW1hVmFsaWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBtZW0gPSB0aGlzLm1lbW9yeSgpLnNwbGl0KCcnKTtcblx0XHRcdHZhciBpO1xuXHRcdFx0Zm9yIChpID0gbWVtLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdGlmIChtZW1baV0gPT09ICcuJykge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodGhpcy5pc09wZXJhdG9yKG1lbVtpXSkpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fTtcblxuXHRcdHNlbGYudXBkYXRlID0gZnVuY3Rpb24odmFsKSB7XG5cdFx0XHR2YXIgbGFzdCA9IHNlbGYuZ2V0TGFzdCgpO1xuXHRcdFx0aWYoc2VsZi5pc09wZXJhdG9yKGxhc3QpICYmIHNlbGYuaXNPcGVyYXRvcih2YWwpKSB7XG5cdFx0XHRcdHNlbGYubWVtb3J5KHNlbGYubWVtb3J5KCkuc2xpY2UoMCwgc2VsZi5tZW1vcnkoKS5sZW5ndGggLSAxKSArIHZhbCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0c2VsZi5tZW1vcnkoc2VsZi5tZW1vcnkoKSArIHZhbCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHNlbGYuaXNPcGVyYXRvciA9IGZ1bmN0aW9uKHgpIHtcblx0XHRcdHZhciBpO1xuXHRcdFx0Zm9yIChpID0gMDsgaSA8IG1vZGVsLm9wZXJhdG9ycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoeCA9PT0gbW9kZWwub3BlcmF0b3JzW2ldKSByZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXHR9XG5cblx0dmFyIG1vZGVsID0gIHtcblx0XHRvcGVyYXRvcnM6IFsnKycsICctJywgJy8nLCAnKicsICclJ10sXG5cdFx0c2lnbnM6IFsnKycsICctJ11cblx0fTtcblxuXHR2YXIgdmlldyA9IHtcblx0XHRpbml0OiBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuJGtleXMgPSAkKCcua2V5cycpO1xuXHRcdFx0dGhpcy4ka2V5cy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkKHRoaXMpLmNsaWNrKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZtLnZlcmlmeSgkKHRoaXMpLnRleHQoKSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdHZpZXcuaW5pdCgpO1xuXG5cdHZhciB2bSA9IG5ldyBWaWV3TW9kZWwoKTtcblx0a28uYXBwbHlCaW5kaW5ncyh2bSk7XG5cbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
